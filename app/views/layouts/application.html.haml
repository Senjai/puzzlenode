!!! Strict
%html
  %head
    %title
      = yield(:title).blank? ? controller_name.humanize : yield(:title)
      \- PuzzleNode
      
    
    %meta{:name=>"viewport", :content=>"width=1050"}
    = stylesheet_link_tag 'compiled/screen.css', :media => 'screen, projection'
    = stylesheet_link_tag 'buttons.css', :media => 'screen, projection'
    = stylesheet_link_tag 'compiled/print.css', :media => 'print'
    /[if IE]
      = stylesheet_link_tag 'compiled/ie.css', :media => 'screen, projection'
    = javascript_include_tag 'jquery-1.5', 'jquery.scrollTo-1.4.2-min.js',
                             'application', 'nested_form', 'rails'
    = csrf_meta_tag
    
    = yield(:header_bottom)

  %body
    = render :partial => "shared/flash", :locals => {:flash => flash}
    %header
      .wrap
        #logo
          %h1= link_to "Puzzle Node", root_path
          = image_tag "loading.gif", :class => "loading"
      %nav
        .wrap
          %ul
            %li= link_to "Puzzles", puzzles_path
            %li= link_to "Announcements", announcements_path
            = render :partial => "shared/user"
          .clear
    #content
      .wrap= yield
    #footer
      = render :partial => "shared/footer"
    :javascript
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-15397397-5']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();